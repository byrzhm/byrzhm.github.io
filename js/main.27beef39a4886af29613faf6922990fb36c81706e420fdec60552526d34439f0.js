(()=>{document.addEventListener("DOMContentLoaded",function(){let r=document.querySelector(".toc-content");if(!r)return;let a=document.querySelectorAll("h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]"),l=r.querySelectorAll("a"),d=document.querySelector("header").offsetHeight;l.forEach(t=>{t.addEventListener("click",function(i){i.preventDefault();let e=this.getAttribute("href").substring(1),n=document.getElementById(e);if(n){let s=n.getBoundingClientRect().top+window.scrollY-d-20;window.scrollTo({top:s,behavior:"smooth"}),history.pushState(null,null,`#${e}`),l.forEach(c=>{c.classList.remove("active"),c.classList.remove("user-clicked")}),this.classList.add("active"),this.classList.add("user-clicked"),setTimeout(()=>{this.classList.remove("user-clicked")},1500)}})});let h={root:null,rootMargin:`-${d+20}px 0px -20% 0px`,threshold:.1},u=new IntersectionObserver(t=>{let i=t.filter(e=>e.isIntersecting);if(i.length>0){let n=i.sort((s,c)=>s.boundingClientRect.top-c.boundingClientRect.top)[0];l.forEach(s=>s.classList.remove("active"));let o=r.querySelector(`a[href="#${n.target.id}"]`);o&&(o.classList.add("active"),o.classList.contains("user-clicked")||o.scrollIntoView({behavior:"smooth",block:"nearest"}))}},h);a.forEach(t=>u.observe(t))});})();
